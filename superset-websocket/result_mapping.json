{
    "index.test.ts": {
        "it_builds_a_valid_Redis_URL_with_a_password": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it_increments_a_valid_Redis_stream_ID": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "invalid channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "success no results": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "sends data to channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid JWT, no lastId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "no sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "closed sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "sends_data_to_channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "stale_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "success_with_results": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "active sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "error": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "multiple sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "channel not present": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "closing_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "multiple_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "services_health_checks": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "responds with a 404 when not found": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "closing sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "success_no_results": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "invalid_JWT": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid JWT, no channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid upgrade": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it builds a valid Redis URL with a password": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "success with results": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "no_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "services health checks": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "active_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid_JWT,_with_lastId_and_lastFirehoseId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it increments a valid Redis stream ID": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "error_sending_data_to_client": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it_builds_a_valid_Redis_URL_with_SSL": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it_builds_a_valid_Redis_URL_from_defaults": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid JWT, with lastId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "responds_with_a_404_when_not_found": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "stale sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid_upgrade": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it_handles_an_invalid_Redis_stream_ID": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid_JWT,_with_lastId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid_JWT,_no_channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it builds a valid Redis URL with SSL": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it builds a valid Redis URL from defaults": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid JWT, with lastId and lastFirehoseId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "valid_JWT,_no_lastId": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "channel_not_present": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "invalid JWT": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "closed_sockets": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "invalid_channel": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "error sending data to client": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "it handles an invalid Redis stream ID": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        }
    },
    "config.test.ts": {
        "should_correctly_apply_partial_configuration_overrides": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should handle invalid environment variable values": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should override StatsD config with environment variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should perform deep merge between configs": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should provide consistent configuration on multiple calls": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_perform_deep_merge_between_configs": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "buildConfig_performs_deep_merge_between_configs": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should clean up environment variables after use": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should correctly apply partial configuration overrides": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "buildConfig builds configuration and applies env var overrides": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {},
            "redis": {
                "username": "default",
                "validateHostname": true
            }
        },
        "should_override_Redis_config_with_environment_variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should build default configuration": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should override JWT config with environment variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_override_StatsD_config_with_environment_variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_provide_consistent_configuration_on_multiple_calls": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_use_default_values_for_missing_environment_variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should use default values for missing environment variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_override_JWT_config_with_environment_variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should override Redis config with environment variables": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_clean_up_environment_variables_after_use": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_build_default_configuration": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "should_handle_invalid_environment_variable_values": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        },
        "buildConfig_builds_configuration_and_applies_env_var_overrides": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {},
            "redis": {
                "username": "default",
                "validateHostname": true
            }
        },
        "buildConfig performs deep merge between configs": {
            "port": 8080,
            "logLevel": "info",
            "logToFile": false,
            "logFilename": "app.log",
            "redisStreamPrefix": "test-async-events-",
            "redisStreamReadCount": 100,
            "redisStreamReadBlockMs": 5000,
            "jwtAlgorithms": [
                "HS256"
            ],
            "jwtSecret": "test123-test123-test123-test123-test123-test123-test123",
            "jwtCookieName": "test-async-token",
            "jwtChannelIdKey": "channel",
            "socketResponseTimeoutMs": 60000,
            "pingSocketsIntervalMs": 20000,
            "gcChannelsIntervalMs": 120000,
            "statsd": {
                "host": "127.0.0.1",
                "port": 8125,
                "globalTags": []
            },
            "redis": {
                "host": "127.0.0.1",
                "port": 6379,
                "password": "some pwd",
                "username": "default",
                "db": 10,
                "ssl": false,
                "validateHostname": true
            }
        }
    }
}